(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dd2bd97"],{"0ccb":function(t,e,i){var s=i("50c4"),n=i("1148"),r=i("1d80"),a=Math.ceil,o=function(t){return function(e,i,o){var c,l,u=String(r(e)),d=u.length,h=void 0===o?" ":String(o),p=s(i);return p<=d||""==h?u:(c=p-d,l=n.call(h,a(c/h.length)),l.length>c&&(l=l.slice(0,c)),t?u+l:l+u)}};t.exports={start:o(!1),end:o(!0)}},1578:function(t,e,i){},2214:function(t,e,i){"use strict";i("4139")},"2a92":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-title"},[i("span",{staticClass:"line"}),i("span",{staticClass:"text"},[t._v(t._s(t.name))]),i("span",{staticClass:"line"})])},n=[],r={props:{name:{type:String,default:""}}},a=r,o=(i("970e"),i("2877")),c=Object(o["a"])(a,s,n,!1,null,"0a58cf78",null);e["a"]=c.exports},"372a":function(t,e,i){"use strict";i("9fe2")},"3e5e":function(t,e,i){"use strict";i("dcff")},4139:function(t,e,i){},"4d90":function(t,e,i){"use strict";var s=i("23e7"),n=i("0ccb").start,r=i("9a0c");s({target:"String",proto:!0,forced:r},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5328:function(t,e,i){},"53b5":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-goods"},[t.showTitle?i("Title",{staticStyle:{background:"#fff"},attrs:{name:"热卖推荐"}}):t._e(),i("van-list",{attrs:{finished:t.isFinished,"finished-text":"没有更多了"},on:{load:t.onReachBottom},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("div",{staticClass:"main"},t._l(t.goodsList,(function(e,s){return i("goods-item",{key:s,attrs:{"product-id":e.goodsId,img:e.img,title:e.title,desc:e.desc,price:e.discountPrice,"old-price":e.price,showBuy:t.showBuy}})})),1)])],1)},n=[],r=i("2a92"),a=i("e399"),o={components:{GoodsItem:a["a"],Title:r["a"]},model:{prop:"isLoading"},props:{goodsList:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},isFinished:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},showBuy:{type:Boolean,defalut:!0}},computed:{loading:{get:function(){return this.isLoading},set:function(t){this.$emit("input",t)}}},methods:{onReachBottom:function(){this.$emit("onReachBottom")}}},c=o,l=(i("2214"),i("2877")),u=Object(l["a"])(c,s,n,!1,null,"33835c78",null);e["a"]=u.exports},"54a6":function(t,e,i){"use strict";i("f7b3")},6700:function(t,e,i){},"757e":function(t,e,i){},"7abe":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("div",{staticClass:"home"},[i("van-search",{attrs:{placeholder:"请输入搜索关键词",shape:"round"},on:{click:t.search}}),i("Swiper",{attrs:{banner:t.banner}}),i("Category",{attrs:{"cate-list":t.cateList}}),i("Session",{attrs:{"session-list":t.sessionList}}),i("Goods",{attrs:{"goods-list":t.list,"is-finished":t.finished,showBuy:!0},on:{onReachBottom:t.onReachBottom},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),i("back-top"),t.isSkeletonShow?i("Skeleton"):t._e()],1)])},n=[],r=(i("99af"),i("d3b7"),i("3ca3"),i("ddb0"),i("2909")),a=i("b775");function o(){return Object(a["a"])({url:"/home/banner",method:"get"})}function c(){return Object(a["a"])({url:"/home/category",method:"get"})}function l(){return Object(a["a"])({url:"/home/topic",method:"get"})}function u(t){return Object(a["a"])({url:"/home/list",method:"get",params:t})}var d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"home-header"},[s("image-pic",{attrs:{width:"28px",height:"28px",src:i("cf05")}}),s("van-button",{staticClass:"search",attrs:{block:"",size:"small"},on:{click:t.onSearch}},[s("span",{staticStyle:{color:"#8e8e8e","margin-right":"6px"}},[s("svg-icon",{attrs:{"icon-class":"search",width:15,height:15}})],1),s("span",[t._v("搜索商品名称")])]),s("span",{staticStyle:{color:"#8e8e8e"},on:{click:t.onUser}},[s("svg-icon",{attrs:{"icon-class":"user",width:18,height:18}})],1)],1),s("div",{staticClass:"placeholder"})])},h=[],p={methods:{onSearch:function(){this.$router.push({path:"/search"})},onUser:function(){this.$router.push({path:"/user"})}}},f=p,g=(i("54a6"),i("2877")),m=Object(g["a"])(f,d,h,!1,null,"8518261e",null),y=m.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"white"}},t._l(t.banner,(function(e,s){return i("van-swipe-item",{key:s,on:{click:function(i){return t.onNavigate(e.topicId)}}},[i("image-pic",{attrs:{width:"100%",height:"150",src:e.img}})],1)})),1)],1)},b=[],_={props:{banner:{type:Array,default:function(){return[]}}},methods:{onNavigate:function(t){this.$router.push({path:"/product",query:{topicId:t}})}}},x=_,C=Object(g["a"])(x,v,b,!1,null,null,null),w=C.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-category"},[i("div",{ref:"scroll",staticClass:"scroll-wrapper"},[i("div",{staticClass:"scroll-content"},t._l(t.list,(function(e,s){return i("div",{key:s,staticClass:"scroll-item__wrapper"},t._l(e,(function(e,s){return i("div",{key:s,staticClass:"scroll-item",on:{click:function(i){return t.onNavigate(e)}}},[i("van-image",{attrs:{width:"45",height:"45",round:"",fit:"fill",src:e.icon}}),i("p",{staticClass:"text"},[t._v(t._s(e.name))])],1)})),0)})),0)]),t.list&&t.list.prev&&t.list.prev.length>5?i("div",{staticClass:"dot-wrapper"},[i("div",{staticClass:"dot",style:{transform:"translateX("+t.rate+")"}})]):t._e()])},k=[],L=(i("4160"),i("fb6a"),i("a9e3"),i("b680"),i("159b"),i("229e")),N={props:{cateList:{type:Array,default:function(){return[]}},isLevel3:{type:Boolean,default:!1}},data:function(){return{rate:0,breakPoint:0}},computed:{list:function(){var t={},e=this.cateList,i=this.cateList.length;if(i<=5)t={prev:e,next:[]};else if(i>5&&i<=10)t={prev:e.slice(0,5),next:e.slice(5)};else{var s=Math.ceil(e.length/2);t={prev:e.slice(0,s),next:e.slice(s)}}return t}},watch:{cateList:function(t){var e=this;t.length>5&&this.$nextTick((function(){e.init()}))}},beforeDestroy:function(){this.bs&&this.bs.destroy()},methods:{onNavigate:function(t){this.$router.push({path:"/categoryGoods",query:{categoryId:t.categoryId}})},init:function(){var t=this;this.bs=new L["a"](this.$refs.scroll,{scrollX:!0,scrollY:!1,click:!0,probeType:3});var e=Math.abs(this.bs.maxScrollX);this._registerHooks(["scroll"],(function(i){var s=Math.abs(i.x);t.rate="".concat(Number(s/e*100).toFixed(2),"%")}))},_registerHooks:function(t,e){var i=this;t.forEach((function(t){i.bs.on(t,e)}))}}},O=N,$=(i("8146"),Object(g["a"])(O,S,k,!1,null,"17d969aa",null)),B=$.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-session"},[i("Title",{attrs:{name:"精选专场"}}),i("div",{staticClass:"main"},t._l(t.sessionList,(function(t,e){return i("session-item",{key:e,staticStyle:{"margin-bottom":"10px"},attrs:{topicId:t.topicId,img:t.img,title:t.title,goodsCount:t.goodsCount,price:t.price}})})),1)],1)},I=[],E=i("2a92"),A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"session-item",on:{click:t.onClick}},[i("van-image",{attrs:{align:"center",width:"100%",height:"160",src:t.img}}),i("div",{staticClass:"title"},[i("span",{staticClass:"title__text"},[t._v(t._s(t.title))])]),i("div",{staticClass:"desc"},[i("van-tag",{attrs:{round:"",type:"success"}},[t._v(t._s(t.goodsCount)+"+款")]),i("span",{staticClass:"desc__text"},[i("i",[t._v("￥"+t._s(t.price))]),t._v("起 ")])],1)],1)},R=[],P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-count-down",t._b({scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"item"},[t._v(t._s(t._f("padZero")(e.hours)))]),i("span",{staticClass:"item"},[t._v(t._s(t._f("padZero")(e.minutes)))]),i("span",{staticClass:"item red"},[t._v(t._s(t._f("padZero")(e.seconds)))])]}}])},"van-count-down",t.$attrs,!1))],1)},q=[],G=(i("4d90"),{filters:{padZero:function(t){return"".concat(t).padStart(2,"0")}}}),T=G,M=(i("ad20"),Object(g["a"])(T,P,q,!1,null,"8a84bbc2",null)),z=M.exports,K={components:{CountDown:z},props:{topicId:{type:Number,default:0},img:{type:String,default:""},title:{type:String,default:""},time:{type:Number,default:0},goodsCount:{type:Number,default:100},price:{type:Number,default:0}},methods:{onClick:function(){this.$router.push({path:"/product",query:{topicId:this.topicId}})}}},U=K,D=(i("372a"),Object(g["a"])(U,A,R,!1,null,"642d2575",null)),H=D.exports,Z={components:{Title:E["a"],SessionItem:H},props:{sessionList:{type:Array,default:function(){return[]}}}},F=Z,X=Object(g["a"])(F,j,I,!1,null,"6475ae0c",null),J=X.exports,Y=i("53b5"),V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"skeleton"},[i("ContentLoader",{attrs:{width:"325",height:"600"}},[i("rect",{attrs:{x:"10",y:"8",rx:"3",ry:"3",width:"305",height:"30"}}),i("rect",{attrs:{x:"10",y:"45",rx:"3",ry:"3",width:"305",height:"130"}}),i("circle",{attrs:{cx:"35",cy:"210",r:"25"}}),i("circle",{attrs:{cx:"35",cy:"280",r:"25"}}),i("circle",{attrs:{cx:"100",cy:"210",r:"25"}}),i("circle",{attrs:{cx:"100",cy:"280",r:"25"}}),i("circle",{attrs:{cx:"165",cy:"210",r:"25"}}),i("circle",{attrs:{cx:"165",cy:"280",r:"25"}}),i("circle",{attrs:{cx:"230",cy:"210",r:"25"}}),i("circle",{attrs:{cx:"295",cy:"210",r:"25"}}),i("circle",{attrs:{cx:"230",cy:"280",r:"25"}}),i("circle",{attrs:{cx:"295",cy:"280",r:"25"}}),i("rect",{attrs:{x:"100",y:"340",rx:"3",ry:"3",width:"120",height:"20"}}),i("rect",{attrs:{x:"10",y:"370",rx:"3",ry:"3",width:"305",height:"130"}}),i("rect",{attrs:{x:"10",y:"510",rx:"3",ry:"3",width:"305",height:"10"}}),i("rect",{attrs:{x:"10",y:"540",rx:"3",ry:"3",width:"305",height:"10"}}),i("rect",{attrs:{x:"10",y:"570",rx:"3",ry:"3",width:"305",height:"10"}})])],1)},Q=[],W=i("e330"),tt={components:{ContentLoader:W["a"]}},et=tt,it=(i("d31e"),Object(g["a"])(et,V,Q,!1,null,"79cf4046",null)),st=it.exports,nt={name:"Home",components:{Header:y,Swiper:w,Category:B,Session:J,Goods:Y["a"],Skeleton:st},data:function(){return{banner:[],cateList:[],sessionList:[],list:[],pageNo:0,pageSize:4,loading:!1,finished:!1,refreshing:!1,isSkeletonShow:!1}},mounted:function(){var t=this;Promise.all([this.getBanner(),this.getCategory(),this.getSession()]).then((function(){t.isSkeletonShow=!1}))},methods:{getBanner:function(){var t=this;return new Promise((function(e){o().then((function(i){t.banner=i.data.banner,e()}))}))},getCategory:function(){var t=this;return new Promise((function(e){c().then((function(i){var s=i.data.category;t.cateList=s,e()}))}))},getSession:function(){var t=this;return new Promise((function(e){l().then((function(i){t.sessionList=i.data.featuredTopic,e()}))}))},getGoodsList:function(){var t=this;u({pageSize:this.pageSize,pageNo:this.pageNo}).then((function(e){var i=e.data.list;t.refreshing?(t.list=i,t.refreshing=!1,t.finished=!1):(t.list=[].concat(Object(r["a"])(t.list),Object(r["a"])(i)),i.length<t.pageSize&&(t.finished=!0)),t.loading=!1}))},onReachBottom:function(){this.finished||(this.loading=!0,this.pageNo+=1,this.getGoodsList())},onRefresh:function(){this.loading||(this.refreshing=!0,this.pageNo=1,this.getBanner(),this.getCategory(),this.getSession(),this.getGoodsList())},search:function(){this.$router.push({path:"/search"})}}},rt=nt,at=(i("951e"),Object(g["a"])(rt,s,n,!1,null,"41052810",null));e["default"]=at.exports},8146:function(t,e,i){"use strict";i("db42")},"92fa":function(t,e){var i=/^(attrs|props|on|nativeOn|class|style|hook)$/;function s(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(t,e){var n,r,a,o,c;for(a in e)if(n=t[a],r=e[a],n&&i.test(a))if("class"===a&&("string"===typeof n&&(c=n,t[a]=n={},n[c]=!0),"string"===typeof r&&(c=r,e[a]=r={},r[c]=!0)),"on"===a||"nativeOn"===a||"hook"===a)for(o in r)n[o]=s(n[o],r[o]);else if(Array.isArray(n))t[a]=n.concat(r);else if(Array.isArray(r))t[a]=[n].concat(r);else for(o in r)n[o]=r[o];else t[a]=e[a];return t}),{})}},"951e":function(t,e,i){"use strict";i("1578")},"970e":function(t,e,i){"use strict";i("5328")},"9a0c":function(t,e,i){var s=i("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(s)},"9fe2":function(t,e,i){},ad20:function(t,e,i){"use strict";i("6700")},cf05:function(t,e,i){t.exports=i.p+"static/img/logo.973a6b85.png"},d31e:function(t,e,i){"use strict";i("757e")},db42:function(t,e,i){},dcff:function(t,e,i){},e330:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("92fa"),n=i.n(s),r=function(){return Math.random().toString(36).substring(2)},a={name:"ContentLoader",functional:!0,props:{width:{type:[Number,String],default:400},height:{type:[Number,String],default:130},speed:{type:Number,default:2},preserveAspectRatio:{type:String,default:"xMidYMid meet"},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},render:function(t,e){var i=e.props,s=e.data,a=e.children,o=i.uniqueKey?i.uniqueKey+"-idClip":r(),c=i.uniqueKey?i.uniqueKey+"-idGradient":r();return t("svg",n()([s,{attrs:{viewBox:"0 0 "+i.width+" "+i.height,version:"1.1",preserveAspectRatio:i.preserveAspectRatio}}]),[t("rect",{style:{fill:"url("+i.baseUrl+"#"+c+")"},attrs:{"clip-path":"url("+i.baseUrl+"#"+o+")",x:"0",y:"0",width:i.width,height:i.height}}),t("defs",[t("clipPath",{attrs:{id:o}},[a||t("rect",{attrs:{x:"0",y:"0",rx:"5",ry:"5",width:i.width,height:i.height}})]),t("linearGradient",{attrs:{id:c}},[t("stop",{attrs:{offset:"0%","stop-color":i.primaryColor,"stop-opacity":i.primaryOpacity}},[i.animate?t("animate",{attrs:{attributeName:"offset",values:"-2; 1",dur:i.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"50%","stop-color":i.secondaryColor,"stop-opacity":i.secondaryOpacity}},[i.animate?t("animate",{attrs:{attributeName:"offset",values:"-1.5; 1.5",dur:i.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"100%","stop-color":i.primaryColor,"stop-opacity":i.primaryOpacity}},[i.animate?t("animate",{attrs:{attributeName:"offset",values:"-1; 2",dur:i.speed+"s",repeatCount:"indefinite"}}):null])])])])}}},e399:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods-item",on:{click:t.onNavigate}},[i("div",{staticClass:"pic"},[i("image-pic",{attrs:{fill:"cover",align:"center",width:"90",height:"100",src:t.img}})],1),i("p",{staticClass:"title"},[t._v(t._s(t.title))]),i("p",{staticClass:"desc"},[t._v(t._s(t.desc))]),i("div",{staticClass:"num"},[i("span",{staticClass:"num__now"},[t._v("¥"+t._s(t._f("toDecimal")(t.price)))]),t.oldPrice!=t.price?i("span",{staticClass:"num__old"},[t._v("¥"+t._s(t._f("toDecimal")(t.oldPrice)))]):t._e()]),t.showBuy?i("div",{staticClass:"btn-wrapper"},[i("van-button",{staticClass:"btn",attrs:{size:"small"}},[t._v("立即购买")])],1):t._e()])},n=[],r={props:["productId","img","title","desc","price","oldPrice","showBuy"],methods:{onNavigate:function(){this.$router.push({path:"/detail",query:{productId:this.productId}})}}},a=r,o=(i("3e5e"),i("2877")),c=Object(o["a"])(a,s,n,!1,null,"2d6ad244",null);e["a"]=c.exports},f7b3:function(t,e,i){}}]);
//# sourceMappingURL=chunk-5dd2bd97.5ae1b684.js.map