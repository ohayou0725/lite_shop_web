{"version":3,"sources":["webpack:///./src/views/auth/regist.vue?284e","webpack:///src/views/auth/regist.vue","webpack:///./src/views/auth/regist.vue?f5ef","webpack:///./src/views/auth/regist.vue","webpack:///./src/views/auth/regist.vue?f2bd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","variables","black","on","onSubmit","validator","checkMobile","required","message","model","value","form","callback","$$v","$set","expression","validatePassword","validateConfirmPassword","scopedSlots","_u","key","fn","staticStyle","getCaptcha","captchaImg","proxy","loading","_v","staticRenderFns","name","data","mobile","password","confirmPassword","captcha","captchaId","computed","mounted","methods","reg","test","length","type","duration","onOpened","$toast","fail","component"],"mappings":"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","file":"static/js/chunk-7fb3db5c.1d5573d4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"registration\"},[_c('nav-bar',{attrs:{\"title\":\"用户注册\"}},[_c('van-icon',{attrs:{\"color\":_vm.variables.black,\"size\":\"18\"}})],1),_c('van-form',{staticClass:\"form\",attrs:{\"validate-trigger\":\"onBlur\",\"show-error\":false},on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"type\":\"text\",\"required\":\"\",\"clearable\":\"\",\"name\":\"注册手机\",\"label\":\"注册手机\",\"placeholder\":\"请输入手机号\",\"rules\":[\n        {\n          validator: _vm.checkMobile,\n          required: true,\n          message: '请输入正确的手机号!',\n        } ]},model:{value:(_vm.form.mobile),callback:function ($$v) {_vm.$set(_vm.form, \"mobile\", $$v)},expression:\"form.mobile\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"required\":\"\",\"clearable\":\"\",\"maxlength\":\"16\",\"name\":\"设置密码\",\"label\":\"设置密码\",\"placeholder\":\"请设置密码\",\"rules\":[{ required: true,validator : _vm.validatePassword, message: '密码必须为6-16位!' } ]},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"required\":\"\",\"clearable\":\"\",\"name\":\"确认密码\",\"label\":\"确认密码\",\"placeholder\":\"请再次输入密码确认\",\"rules\":[{ required: true, validator : _vm.validateConfirmPassword,message: '请再次输入密码确认!' }]},model:{value:(_vm.form.confirmPassword),callback:function ($$v) {_vm.$set(_vm.form, \"confirmPassword\", $$v)},expression:\"form.confirmPassword\"}}),_c('van-field',{attrs:{\"type\":\"text\",\"required\":\"\",\"center\":\"\",\"clearable\":\"\",\"name\":\"手机号\",\"maxlength\":\"4\",\"label\":\"图形验证码\",\"placeholder\":\"请输入图形验证码\",\"rules\":[{ required: true, message: '请输入正确的图形验证码！' }]},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('div',{staticStyle:{\"background\":\"#eee\",\"height\":\"34px\"},on:{\"click\":_vm.getCaptcha}},[_c('img',{staticStyle:{\"height\":\"34px\"},attrs:{\"src\":'data:image/png;base64,'+_vm.captchaImg}})])]},proxy:true}]),model:{value:(_vm.form.captcha),callback:function ($$v) {_vm.$set(_vm.form, \"captcha\", $$v)},expression:\"form.captcha\"}}),_c('div',{staticStyle:{\"margin\":\"36px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"loading\":_vm.loading,\"type\":\"info\",\"loading-text\":\"登录中...\",\"native-type\":\"submit\"}},[_vm._v(\"注册\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n<template>\n  <div class=\"registration\">\n    <nav-bar title=\"用户注册\">\n      <van-icon :color=\"variables.black\" size=\"18\" />\n    </nav-bar>\n\n    <van-form\n      class=\"form\"\n      validate-trigger=\"onBlur\"\n      :show-error=\"false\"\n      @submit=\"onSubmit\"\n    >\n      <van-field\n        v-model=\"form.mobile\"\n        type=\"text\"\n        required\n        clearable\n        name=\"注册手机\"\n        label=\"注册手机\"\n        placeholder=\"请输入手机号\"\n        :rules=\"[\n          {\n            validator: checkMobile,\n            required: true,\n            message: '请输入正确的手机号!',\n          },\n        ]\"\n      />\n\n      <van-field\n        v-model=\"form.password\"\n        type=\"password\"\n        required\n        clearable\n        maxlength='16'\n        name=\"设置密码\"\n        label=\"设置密码\"\n        placeholder=\"请设置密码\"\n        :rules=\"[{ required: true,validator : validatePassword, message: '密码必须为6-16位!' },]\"\n      />\n\n      <van-field\n        v-model=\"form.confirmPassword\"\n        type=\"password\"\n        required\n        clearable\n        name=\"确认密码\"\n        label=\"确认密码\"\n        placeholder=\"请再次输入密码确认\"\n        :rules=\"[{ required: true, validator : validateConfirmPassword,message: '请再次输入密码确认!' }]\"\n      />\n\n      <!-- <van-field\n        v-model=\"form.mailcode\"\n        type=\"number\"\n        required\n        center\n        clearable\n        name=\"邮箱验证码\"\n        label=\"邮箱验证码\"\n        placeholder=\"请输入验证码\"\n        :rules=\"[{ required: true, message: '两次输入密码不一致！' }]\"\n      >\n        <van-button\n          slot=\"button\"\n          size=\"small\"\n          plain\n          type=\"info\"\n          native-type=\"button\"\n          @click.stop=\"getMailCode\"\n        >发送验证码</van-button>\n      </van-field> -->\n\n      <van-field\n        v-model=\"form.captcha\"\n        type=\"text\"\n        required\n        center\n        clearable\n        name=\"手机号\"\n        maxlength=\"4\"\n        label=\"图形验证码\"\n        placeholder=\"请输入图形验证码\"\n        :rules=\"[{ required: true, message: '请输入正确的图形验证码！' }]\"\n      >\n        <template #button>\n          <div\n            style=\"background: #eee; height: 34px\"\n            @click=\"getCaptcha\"\n          >\n          <img :src=\"'data:image/png;base64,'+captchaImg\" style=\"height:34px\"> \n\n          </div>\n        </template>\n      </van-field>\n\n      <div style=\"margin: 36px\">\n        <van-button\n          round\n          block\n          :loading=\"loading\"\n          type=\"info\"\n          loading-text=\"登录中...\"\n          native-type=\"submit\"\n        >注册</van-button>\n      </div>\n    </van-form>\n  </div>\n</template>\n\n<script>\nimport variables from '@/styles/variables.scss'\nimport { registry,getCaptcha } from '@/api/user'\n\nexport default {\n  name: 'Regist',\n  data() {\n    return {\n      form: {\n        mobile: '',\n        password: '',\n        confirmPassword: '',\n        captcha: '',\n        captchaId:  ''\n      },\n      loading: false,\n      captchaImg: ''\n    }\n  },\n  computed: {\n    variables() {\n      return variables\n    }\n  },\n  mounted() {\n    this.getCaptcha()\n  },\n  methods: {\n    // 获取图形验证码\n    getCaptcha() {\n      getCaptcha().then(res=>{\n        const captcha = res.data.captcha\n        this.form.captchaId = captcha.captchaId\n        this.captchaImg = captcha.img\n      })\n    },\n    // 获取邮箱验证码\n    // getMailCode() {\n    //   const { mobile } = this.form\n    //   if (!email || !this.checkMobile(mobile)) {\n    //     this.$toast.fail('请先输入正确的邮箱地址')\n    //     return\n    //   }\n    //   this.$toast.loading({\n    //     duration: 0,\n    //     message: '加载中...',\n    //     forbidClick: true\n    //   })\n    //   getMailCode({ mobile: this.form.mobile }).then((res) => {\n    //     this.$toast.clear()\n    //     this.$notify({\n    //       type: 'success',\n    //       message: '邮箱验证码已发送',\n    //       duration: 2000\n    //     })\n    //   })\n    // },\n    // 校检邮箱\n    checkMobile(mobile) {\n      const reg = /^1\\d{10}$/\n      return reg.test(mobile)\n    },\n    validatePassword(password) {\n      return password.length > 5 && password.length < 17\n    },\n    validateConfirmPassword(confirmPassword) {\n        const password = this.form.password\n        return password === confirmPassword\n    },\n    // 提交\n    onSubmit() {\n      const { password, confirmPassword } = this.form\n      if (password !== confirmPassword) {\n        this.$toast.fail('确认密码与设置的不一致')\n        return\n      }\n      this.loading = true\n      registry(this.form)\n        .then((res) => {\n          if (res.success) {\n            this.$notify({\n            type: 'success',\n            message: '注册成功，请登录',\n            duration: 2000,\n            onOpened: () => {\n              this.$router.back()\n            }\n          })\n          }\n        })\n        .finally(() => {\n          this.loading = false\n        })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.form {\n  padding: 24px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./regist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./regist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./regist.vue?vue&type=template&id=cca6742c&scoped=true&\"\nimport script from \"./regist.vue?vue&type=script&lang=js&\"\nexport * from \"./regist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./regist.vue?vue&type=style&index=0&id=cca6742c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cca6742c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./regist.vue?vue&type=style&index=0&id=cca6742c&lang=scss&scoped=true&\""],"sourceRoot":""}